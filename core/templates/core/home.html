{% extends 'core/base.html' %}

{% block title %}AccessJobs | Find Your Dream Job{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero position-relative text-white d-flex align-items-center justify-content-center" style="
    background: url('https://media.istockphoto.com/id/1349094945/photo/human-using-a-computer-laptop-for-searching-for-job-and-fill-out-personal-data-on-job-website.jpg?s=612x612&w=0&k=20&c=nVCY302pin29eP1rN0eBGstQN3WF4YQTWvZ4TvAs21g=') no-repeat center center;
    background-size: cover;
    min-height: 70vh;
">
  <div class="overlay position-absolute w-100 h-100" style="background: rgba(0,0,0,0.5); top:0; left:0;"></div>
  <div class="container text-center" style="z-index:1;">
    <h1 class="display-4 fw-bold mb-3">Welcome to AccessJobs</h1>
    <p class="lead mb-4">Discover your dream job or hire top talent with ease.</p>
    {% if not user.is_authenticated %}
      <a href="{% url 'register' %}" class="btn btn-warning btn-lg rounded-pill me-2 btn-hover-scale">Get Started</a>
      <a href="{% url 'login' %}" class="btn btn-light btn-lg rounded-pill btn-hover-scale">Login</a>
    {% else %}
      <a href="{% url 'job_list' %}" class="btn btn-info btn-lg rounded-pill me-2 btn-hover-scale">Browse Jobs</a>
      <a href="{% url 'recommendations' %}" class="btn btn-success btn-lg rounded-pill btn-hover-scale">Recommendations</a>
    {% endif %}
  </div>
</section>

<!-- Job Search Section -->
<div class="container my-5">
  <div class="card shadow-sm p-4 rounded-4">
    <h4 class="mb-3">Search Jobs</h4>
    <form method="get" action="{% url 'job_list' %}">
      <div class="row g-2">
        <div class="col-md-4"><input type="text" class="form-control" name="q" placeholder="Job title..." value="{{ request.GET.q }}"></div>
        <div class="col-md-4"><input type="text" class="form-control" name="location" placeholder="Location..." value="{{ request.GET.location }}"></div>
        <div class="col-md-4"><input type="text" class="form-control" name="company" placeholder="Company..." value="{{ request.GET.company }}"></div>
      </div>
      <div class="mt-3 text-end"><button type="submit" class="btn btn-success btn-hover-scale">Search</button></div>
    </form>
  </div>
</div>

<!-- Job Board -->
<div class="container my-5">
  <h2 class="fw-bold mb-4">Job Board</h2>
  <div class="row g-3">
    {% for job in jobs %}
      <div class="col-md-6">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">{{ job.title }}</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{ job.company }} â€” {{ job.location }}</h6>
            <p class="card-text">{{ job.description|truncatewords:30 }}</p>
          </div>
          <div class="card-footer bg-white d-flex justify-content-between align-items-center">
            <div>
              <small class="text-muted">Posted {{ job.created_at|date:"M d, Y" }}</small><br>
              {% if job.deadline %}
                <small class="text-muted">Deadline: {{ job.deadline|date:"M d, Y" }}</small>
              {% endif %}
            </div>
            <div class="d-flex gap-1">
              <a href="{% url 'job_detail' job.id %}" class="btn btn-sm btn-info">Details</a>

              {% if user.is_authenticated and not user.is_staff %}
                {% if job.id in applied_ids %}
                  <button class="btn btn-sm btn-secondary" disabled>Applied</button>
                {% else %}
                  <form method="post" action="{% url 'apply_job' job.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button class="btn btn-sm btn-success" type="submit">Apply</button>
                  </form>
                {% endif %}

                {% if job.id in bookmarked_ids %}
                  <a href="{% url 'bookmark_job' job.id %}" class="btn btn-warning btn-sm">Unsave</a>
                {% else %}
                  <a href="{% url 'bookmark_job' job.id %}" class="btn btn-outline-warning btn-sm">Save</a>
                {% endif %}
              {% else %}
                <a href="{% url 'login' %}?next={% url 'home' %}" class="btn btn-sm btn-success">Apply</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <p>No jobs found.</p>
    {% endfor %}
  </div>
</div>

<!-- Features Section -->
<div class="container my-5">
  <div class="row text-center">
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm border-0 rounded-4 p-4" style="background: #ffe8d6;">
        <h4 class="fw-bold text-primary">Search Jobs</h4>
        <p>Browse thousands of job postings across multiple industries.</p>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm border-0 rounded-4 p-4" style="background: #d6f5f5;">
        <h4 class="fw-bold text-success">Post Jobs</h4>
        <p>Employers can post openings and connect with top talent.</p>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm border-0 rounded-4 p-4" style="background: #f5d6f5;">
        <h4 class="fw-bold text-warning">Build Profile</h4>
        <p>Create your profile and showcase your skills to recruiters.</p>
      </div>
    </div>
  </div>
</div>

<!-- How It Works -->
<div class="bg-light py-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-4">How It Works</h2>
    <div class="row text-center">
      <div class="col-md-3"><span class="fw-bold fs-4 text-primary">1</span><p>Sign up for free</p></div>
      <div class="col-md-3"><span class="fw-bold fs-4 text-success">2</span><p>Build your profile</p></div>
      <div class="col-md-3"><span class="fw-bold fs-4 text-warning">3</span><p>Apply for jobs</p></div>
      <div class="col-md-3"><span class="fw-bold fs-4 text-info">4</span><p>Get hired</p></div>
    </div>
  </div>
</div>

<!-- Testimonials -->
<div class="container my-5">
  <h2 class="text-center fw-bold mb-4">What Our Users Say</h2>
  <div class="row text-center">
    <div class="col-md-4 mb-3">
      <div class="card rounded-4 shadow-sm p-4 border-primary testimonial-card" style="background: #ffe8d6;">
        <p class="mb-3 text-dark">"AccessJobs helped me land my first developer job!"</p>
        <footer class="blockquote-footer text-dark">Oliver, Frontend Developer</footer>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card rounded-4 shadow-sm p-4 border-success testimonial-card" style="background: #d6f5f5;">
        <p class="mb-3 text-dark">"Posting jobs is easy, and we found great candidates quickly."</p>
        <footer class="blockquote-footer text-dark">Charlotte, HR Manager</footer>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card rounded-4 shadow-sm p-4 border-warning testimonial-card" style="background: #f5d6f5;">
        <p class="mb-3 text-dark">"I built my profile and recruiters started reaching out to me."</p>
        <footer class="blockquote-footer text-dark">William, Data Analyst</footer>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-white py-3 text-center">
  <p class="mb-0">&copy; 2025 AccessJobs. All rights reserved.</p>
</footer>

<style>
  .testimonial-card {transition: transform 0.3s, box-shadow 0.3s;}
  .testimonial-card:hover {transform: translateY(-10px); box-shadow: 0 10px 25px rgba(0,0,0,0.2);}
  .btn-hover-scale {transition: all 0.3s;}
  .btn-hover-scale:hover { transform: scale(1.05);}
</style>
{% endblock %}
